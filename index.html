<!DOCTYPE html>
<html>
<head>
<title>Battleships</title>
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#ffffff">
<style>
*, *:before, *:after {
    -webkit-user-select: none; /* Chrome/Safari */        
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* IE10+ */
}

.btn-group .button {
    background: rgb(76, 175, 80); /* Green */
    border: 1px solid green;
    color: white;
    padding: 10px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    cursor: pointer;
    width: 200px;
	height: 40px;
    display: block;
}

.btn-group .button:not(:last-child) {
    border-bottom: none; /* Prevent double borders */
}

.btn-group .button:hover {
    background: rgb(62, 142, 65);
}

.canvas-container{
  position: relative;
  width: 950px;
  height: 550px;
}
#canvas {
  position: absolute;
  background-color:lightgrey
}
#button0 {
  position:absolute;
  left:65%;
  top:40%
}
#button1 {
  position:absolute;
  left:65%;
  top:47%
}
#button2 {
  position:absolute;
  left:65%;
  top:54%
}
#button3 {
  position:absolute;
  left:65%;
  top:61%
}
#button4 {
  position:absolute;
  left:65%;
  top:68%
}
#button5 {
  position:absolute;
  left:65%;
  top:75%
}
#button6 {
  position:absolute;
  left:65%;
  top:82%
}

</style>
</head>
<body>

<div class="canvas-container">
 <canvas id='canvas' width='950px' height='550px'></canvas>
 <div class = "btn-group">
<button class = "button" id="button0" onclick="mode_change('Random');">Random Problem</button>
<button class = "button" id="button1" onclick="mode_change('Easy');">Easy Problem</button>
<button class = "button" id="button2" onclick="mode_change('Solution');">Solution</button>
<button class = "button" id='button3' onclick="mode_change('Guess');" style="background:rgb(76, 175, 80);">Guess Mode</button>
<button class = "button" id="button4" onclick="mode_change('Solver');">Puzzle Solver</button>
<button class = "button" id="button5" onclick="mode_change('Enter');">Enter Problem</button>
<button class = "button" id="button6" onclick="mode_change('Restart');">Restart Problem</button>
 </div>
</div>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
ctx.font = "30px Arial";
ctx.fillStyle = "#000000";

function color_change(id){//Change the color of the guess button on click

  var background = document.getElementById(id).style.backgroundColor;

  if(background == "rgb(76, 175, 80)")
  {
  document.getElementById(id).style.backgroundColor = "rgb(62,142,65)";
  }
  if(background == "rgb(62, 142, 65)")
  {
    document.getElementById(id).style.backgroundColor = "rgb(76,175,80)";
  }

}

//Variables for detected ships
var battleship_detected = false; var bx = -1; var by = -1;
var cruiser1_detected = false; var c1x = -1; var c1y = -1;
var cruiser2_detected = false; var c2x = -1; var c2y = -1;
var destroyer1_detected = false; var d1x = -1; var d1y = -1;
var destroyer2_detected = false; var d2x = -1; var d2y = -1;
var destroyer3_detected = false; var d3x = -1; var d3y = -1;
var submarine1_detected = false; var s1x = -1; var s1y = -1;
var submarine2_detected = false; var s2x = -1; var s2y = -1;
var submarine3_detected = false; var s3x = -1; var s3y = -1;
var submarine4_detected = false; var s4x = -1; var s4y = -1;

//Initialize boards
var problem = new Array(10);
var answer = new Array(10);
var work = new Array(10);
var guess = new Array(10);
var row_tot = new Array(10);
var col_tot = new Array(10);
var hints = new Array(6);
for(var i = 0; i < 10; ++i){
	problem[i] = new Array(10);
	answer[i] = new Array(10);
	work[i] = new Array(10);
	guess[i] = new Array(10);
	row_tot[i] = 0;
	col_tot[i] = 0;
	for(var j = 0; j < 10; ++j){
		problem[i][j] = -1;
		answer[i][j] = 0;
		work[i][j] = -1;
		guess[i][j] = -1;
	}
}

//Initialize other variables
var solution_shown = false;
var guessing = false;
var mouse_down = false;
var dragged = false;
var drag_value = 9;

ctx.globalAlpha = 0.2; //Draw side gray bar
ctx.fillStyle="#000000";
ctx.fillRect(600,0,350,550);
ctx.globalAlpha = 1;

function draw_board(){ //Draws the grid and the ships on the side
ctx.clearRect(10,10,550,550);
ctx.rect(10,10,500.5,500.5);
ctx.fill();
for(var i = 0; i < 10; i++){//Reset totals so that they don't re-add together every time its drawn
	row_tot[i] = 0;
	col_tot[i] = 0;
}
	for (var i = 0; i < 10; i++) { //Draw grid
		for(var j = 0; j < 10; j++){
			ctx.beginPath();
			ctx.fillStyle="#FFFFFF";
			ctx.rect(50*i + 11,50*j + 11,48.5,48.5);
			ctx.fill();
			ctx.closePath();
			ctx.fillStyle="#000000";
			if(answer[i][j] > 0){ //Calculate row and column totals
				row_tot[j] = ++row_tot[j];
			}
			if(answer[j][i] > 0){
				col_tot[j] = ++col_tot[j];
			}
		}
	}

	for(var i = 0; i < 10; i++){//display totals
		ctx.fillText(row_tot[i],525,50*i+50);
		ctx.fillText(col_tot[i],50*i + 25,540);
	}

for(var i = 0; i < 10; ++i){ //Detect complete ships
	for(var j = 0; j < 10; ++j){
		if(work[i][j] === 6 || problem[i][j] === 6){ //Submarine detection
			if(submarine1_detected && !(s1x === i && s1y === j)){
				if(submarine2_detected && !(s2x === i && s2y === j) && !(s1x === i && s1y === j)){
					if(submarine3_detected && !(s3x === i && s3y === j) && !(s2x === i && s2y === j) && !(s1x === i && s1y === j)){
						if(!submarine4_detected){
							submarine4_detected = true;
						}
					}
					else if(!submarine3_detected){
						submarine3_detected = true;
						s3x = i;
						s3y = j;
					}
				}
				else if(!submarine2_detected){
					submarine2_detected = true;
					s2x = i;
					s2y = j;
				}
			}
			else if(!submarine1_detected){
				submarine1_detected = true;
				s1x = i;
				s1y = j;
			}
		}
		if(work[i][j] === 4 || problem[i][j] === 4){
			if(work[i][j+1] === 2 || problem[i][j+1] === 2){//Destroyer detection
				if(destroyer1_detected && !(d1x === i && d1y === j)){
					if(destroyer2_detected && !(d2x === i && d2y === j) && !(d1x === i && d1y === j)){
						if(!destroyer3_detected){
							destroyer3_detected = true;
						}
					}
					else if(!destroyer2_detected){
						destroyer2_detected = true;
						d2x = i;
						d2y = j;
					}
				}
				else if(!destroyer1_detected){
					destroyer1_detected = true;
					d1x = i;
					d1y = j;
				}
			}
			if(work[i][j+1] === 5 || problem[i][j+1] === 5){
				if(work[i][j+2] === 2 || problem[i][j+2] === 2){ //Cruiser detection
					if(cruiser1_detected && !(c1x === i && c1y === j)){
						if(!cruiser2_detected){
							cruiser2_detected = true;
						}
					}
					else if(!cruiser1_detected){
						cruiser1_detected = true;
						c1x = i;
						c1y = j;
					}
				}
				if(work[i][j+2] === 5 || problem[i][j+2] === 5){ //Battleship detection
					if(work[i][j+3] === 2 || problem[i][j+3] === 2){
						if(!battleship_detected){
							battleship_detected = true;
						}
					}
				}
			}
		}
		if(work[i][j] === 1 || problem[i][j] === 1){
			if(work[i+1][j] === 3 || problem[i+1][j] === 3){ //Destroyer detection
				if(destroyer1_detected && !(d1x === i && d1y === j)){
					if(destroyer2_detected && !(d2x === i && d2y === j) && !(d1x === i && d1y === j)){
						if(!destroyer3_detected){
							destroyer3_detected = true;
						}
					}
					else if(!destroyer2_detected){
						destroyer2_detected = true;
						d2x = i;
						d2y = j;
					}
				}
				else if(!destroyer1_detected){
					destroyer1_detected = true;
					d1x = i;
					d1y = j;
				}
			}
			if(work[i+1][j] === 5 || problem[i+1][j] === 5){
				if(work[i+2][j] === 3 || problem[i+2][j] === 3){  //Cruiser detection
					if(cruiser1_detected && !(cx === i && cy === j)){
						if(!cruiser2_detected){
							cruiser2_detected = true;
							c2x = i;
							c2y = j;
						}
					}
					else if(!cruiser1_detected){
						cruiser1_detected = true;
						cx = i;
						cy = j;
					}
				}
				if(work[i+2][j] === 5 || problem[i+2][j] === 5){ //Battleship detection
					if(work[i+3][j] === 3 || problem[i+3][j] === 5){
						if(!battleship_detected){
							battleship_detected = true;
							bx = i;
							by = j;
						}
					}
				}
			}
		}
	}
}
//Shade ships grey if detected
//Sub1
if(submarine1_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.beginPath();
ctx.arc((12+1)*50 - 15,(1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

if(submarine2_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
//Sub2
ctx.beginPath();
ctx.arc((13+1)*50 - 15,(1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

if(submarine3_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
//Sub3
ctx.beginPath();
ctx.arc((14+1)*50 - 15,(1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

if(submarine4_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
//Sub4
ctx.beginPath();
ctx.arc((15+1)*50 - 15,(1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Destroyer1
if(destroyer1_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(12+1)-15,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((12+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();
ctx.fillRect(50*(13+1)-35,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((13+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Destroyer2
if(destroyer2_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(14+1)-15,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((14+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();
ctx.fillRect(50*(15+1)-35,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((15+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Destroyer3
if(destroyer3_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(16+1)-15,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((16+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();
ctx.fillRect(50*(17+1)-35,(1+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((17+1)*50 - 15,(1+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Cruiser1
if(cruiser1_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(12+1)-15,(2+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((12+1)*50 - 15,(2+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();
ctx.fillRect(50*(13+1)-35,(2+1)*50-35,40,40);
ctx.fillRect(50*(14+1)-35,(2+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((14+1)*50 - 15,(2+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Cruiser 2
if(cruiser2_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(15+1)-15,(2+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((15+1)*50 - 15,(2+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();	
ctx.fillRect(50*(16+1)-35,(2+1)*50-35,40,40);
ctx.fillRect(50*(17+1)-35,(2+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((17+1)*50 - 15,(2+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

//Battleship
if(battleship_detected){
ctx.fillStyle="#555555";
}
else{
ctx.fillStyle="#000000";
}
ctx.fillRect(50*(12+1)-15,(3+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((12+1)*50 - 15,(3+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();	
ctx.fillRect(50*(13+1)-35,(3+1)*50-35,40,40);
ctx.fillRect(50*(14+1)-35,(3+1)*50-35,40,40);
ctx.fillRect(50*(15+1)-35,(3+1)*50-35,20,40);
ctx.beginPath();
ctx.arc((15+1)*50 - 15,(3+1)*50 - 15,20,0,2*Math.PI,false);
ctx.fill();

ctx.fillStyle="#000000";	
}

function check(row,col,dir,size){ //When creating a board checks surrounding spaces of ship
	for(var i = 0; i < 3; i++){
		for(var j = 0; j < 3; j++){
			if(((row - 1 + i) >= 0) && ((col - 1 + j) >= 0) && ((row - 1 + i) <= 9) & ((col - 1 + j) <= 9)) { //check if current cell is out of bounds
				if(answer[row - 1 + i][col - 1 + j] > 0) { //check cell for ship
					return 0;
				}
			}
		}
	}
	//Move to next cell
	if (dir === 0) {
		row = row - size + 1;
	}
	else if(dir === 1) {
		col = col + size - 1;
	}
	else if(dir === 2) {
		row = row + size - 1;
	}
	else if(dir === 3) {
		col = col - size + 1;
	}
	//Check next cell
	for(var i = 0; i < 3; i++){
		for(var j = 0; j < 3; j++){
			if(((row - 1 + i) >= 0) && ((col - 1 + j) >= 0) && ((row - 1 + i) <= 9) & ((col - 1 + j) <= 9)) { //check if current cell is out of bounds
				if(answer[row - 1 + i][col - 1 + j] > 0) { //check cell for ship
					return 0;
				}
			}
		}
	}
	return 1;
}

function create(){ //Create random legal board
	var row = Math.floor(Math.random()*10);
	var col = Math.floor(Math.random()*10);
	var dir = Math.floor(Math.random()*4);
	
	//Create Battleship
	var repeat = true;
	while(repeat){
		dir = Math.floor(Math.random()*4);
		if((dir === 0) && (row > 2)){//up
			answer[row][col] = 3;
			answer[row - 1][col] = 5;
			answer[row - 2][col] = 5;
			answer[row - 3][col] = 1;
			repeat = false;
		}
		else if((dir === 1) && (col < 7)){//right
			answer[row][col] = 4;
			answer[row][col + 1] = 5;
			answer[row][col + 2] = 5;
			answer[row][col + 3] = 2;
			repeat = false;
		}
		else if((dir === 2) && (row < 7)){//down
			answer[row][col] = 1;
			answer[row + 1][col] = 5;
			answer[row + 2][col] = 5;
			answer[row + 3][col] = 3;
			repeat = false;
		}
		else if((dir === 3) && (col > 2)){//left
			answer[row][col] = 2;
			answer[row][col - 1] = 5;
			answer[row][col - 2] = 5;
			answer[row][col - 3] = 4;
			repeat = false;
		}
	}
	
	//Create Cruisers
	for(var ship=0; ship < 2; ship++){
		repeat = true;
		while(repeat){
			row = Math.floor(Math.random()*10);
			col = Math.floor(Math.random()*10);
			dir = Math.floor(Math.random()*4);
			if((dir === 0) && (row > 1) && check(row,col,dir,3)){//up
				answer[row][col] = 3;
				answer[row - 1][col] = 5;
				answer[row - 2][col] = 1;
				repeat = false;
			}
			else if((dir === 1) && (col < 8) && check(row,col,dir,3)){//right
				answer[row][col] = 4;
				answer[row][col + 1] = 5;
				answer[row][col + 2] = 2;
				repeat = false;
			}
			else if((dir === 2) && (row < 8) && check(row,col,dir,3)){//down
				answer[row][col] = 1;
				answer[row + 1][col] = 5;
				answer[row + 2][col] = 3;
				repeat = false;
			}
			else if((dir === 3) && (col > 1) && check(row,col,dir,3)){//left
				answer[row][col] = 2;
				answer[row][col - 1] = 5;
				answer[row][col - 2] = 4;
				repeat = false;
			}
		}
	}
	
	//Create Destroyers
	for(var ship=0; ship < 3; ship++){
		repeat = true;
		while(repeat){
			row = Math.floor(Math.random()*10);
			col = Math.floor(Math.random()*10);
			dir = Math.floor(Math.random()*4);
			if((dir === 0) && (row > 1) && check(row,col,dir,2)){//up
				answer[row][col] = 3;
				answer[row - 1][col] = 1;
				repeat = false;
			}
			else if((dir === 1) && (col < 8) && check(row,col,dir,2)){//right
				answer[row][col] = 4;
				answer[row][col + 1] = 2;
				repeat = false;
			}
			else if((dir === 2) && (row < 8) && check(row,col,dir,2)){//down
				answer[row][col] = 1;
				answer[row + 1][col] = 3;
				repeat = false;
			}
			else if((dir === 3) && (col > 1) && check(row,col,dir,2)){//left
				answer[row][col] = 2;
				answer[row][col - 1] = 4;
				repeat = false;
			}
		}
	}
	
	//Create Submarines
	for(var ship = 0; ship < 4; ship++){
		repeat = true;
		while(repeat){
			row = Math.floor(Math.random()*10);
			col = Math.floor(Math.random()*10);
			if(check(row,col,1,1)){
				answer[row][col] = 6;
				repeat = false;
			}
		}
	}
}

function generate_hints(){ //Generates 3 random hints of ships
var repeat = true;
	while(repeat){
		hints[0] = Math.floor(Math.random()*10);
		hints[1] = Math.floor(Math.random()*10);
		if(answer[hints[0]][hints[1]] > 0){
			repeat = false;
		}
	}
	repeat = true;
	while(repeat){
		hints[2] = Math.floor(Math.random()*10);
		hints[3] = Math.floor(Math.random()*10);
		if(answer[hints[2]][hints[3]] > 0 && !((hints[0] === hints[2]) && (hints[1] === hints[3])) ){
			repeat = false;
		}
	}
	repeat = true;
	while(repeat){
		hints[4] = Math.floor(Math.random()*10);
		hints[5] = Math.floor(Math.random()*10);
		if(answer[hints[4]][hints[5]] > 0 && !((hints[0] === hints[4]) && (hints[1] === hints[5])) && !((hints[4] === hints[2]) && (hints[5] === hints[3])) ){
			repeat = false;
		}
	}
}

function decode_display(data,row,col){ //Displays the board based on the ship array
switch(data){
		case 0: //water
			ctx.fillText("~~~",50*(row+1) - 40,50*(col+1) - 20);
			ctx.fillText("~~~",50*(row+1) - 40,50*(col+1) - 5);
			ctx.fillText("~~~",50*(row+1) - 40,50*(col+1) + 10);
		break;
		case 1: //left end
			ctx.fillRect(50*(row+1)-15,(col+1)*50-35,20,40);
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,20,0,2*Math.PI,false);
			ctx.fill();
		break;
		case 2: //down end
			ctx.fillRect(50*(row+1)-35,(col+1)*50-35,40,20);
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,20,0,2*Math.PI,false);
			ctx.fill();
		break;
		case 3: //right end
			ctx.fillRect(50*(row+1)-35,(col+1)*50-35,20,40);
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,20,0,2*Math.PI,false);
			ctx.fill();
		break;
		case 4://up end
			ctx.fillRect(50*(row+1)-35,(col+1)*50-15,40,20);
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,20,0,2*Math.PI,false);
			ctx.fill();
		break;
		case 5://center
			ctx.fillRect(50*(row+1)-35,(col+1)*50-35,40,40);
		break;
		case 6://submarine
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,20,0,2*Math.PI,false);
			ctx.fill();
		break;
		case 7://hint
			decode_display(problem[row][col],row,col); //case for hints
		break;
		case 8://unknown ship
			ctx.beginPath();
			ctx.arc((row+1)*50 - 15,(col+1)*50 - 15,10,0,2*Math.PI,false);
			ctx.fill();
		break;
	}
}

function display_problem(){//Displays the problem
	draw_board();
	for (var i = 0; i < 10; i++){
		for(var j = 0; j < 10; j++){
			if( (i === hints[0])&&(j === hints[1]) || (i === hints[2])&&(j === hints[3]) || (i === hints[4])&&(j === hints[5]) ){
				problem[i][j] = answer[i][j];
				decode_display(problem[i][j],i,j);
				work[i][j] = 7;
			}
			else{
				problem[i][j] = -1;
			}
		}
	}
}

//Random Problem(Initial run of program)
create();
generate_hints();
display_problem();

function display_answer(){ //display the answer of the board
draw_board();
	for (var i = 0; i < 10; i++){
		for(var j = 0; j < 10; j++){
		decode_display(answer[i][j],i,j);
		if(answer[i][j] !== work[i][j] && work[i][j] !== 7){//Check for mistakes
			ctx.globalAlpha = 0.2;
			ctx.fillStyle="#FF0000";
			ctx.fillRect(50*i + 11,50*j + 11,48.5,48.5);
			ctx.globalAlpha = 1;
			ctx.fillStyle="#000000";
		}
		}
	}
}

function getMousePos(canvas, evt) { //Get Mouse grid coordinates
  var rect = canvas.getBoundingClientRect();
  return {
    x: Math.floor((evt.clientX - rect.left - 10)/50),
    y: Math.floor((evt.clientY - rect.top - 10)/50)
  };
}

function update_display(x,y){//Update the view of the board
	if(dragged && work[x][y] !== 7){
		if(drag_value === 9){
			if(work[x][y] === -1){
				drag_value = 0;
				work[x][y] = 0;
			}
			else if(work[x][y] === 0){
				drag_value = 8;
				work[x][y] = 8;
			}
		}
		if(work[x][y] === -1){
			work[x][y] = drag_value;
		}
	}
	else if(work[x][y] !== 7){
		if(work[x][y] === -1){
			work[x][y] = 0;
		}
		else if(work[x][y] === 0){
			work[x][y] = 8;
		}
		else{
			work[x][y] = -1;
		}
	}
	draw_board();
	for(var i = 0; i < 10; ++i){
		for(var j = 0; j < 10; ++j){
			decode_display(work[i][j],i,j);
		}
	}
}

canvas.addEventListener('mousemove', function(evt1){ //When moved
	var mousePos = getMousePos(canvas, evt1);
	if(mouse_down){
	dragged = true;
	if(mousePos.x > -1 && mousePos.x < 10 && mousePos.y > -1 && mousePos.y < 10){
	update_display(mousePos.x,mousePos.y);
	}
	}
},false);

document.addEventListener('mouseup', function(evt2){ //When mouse is released
	var mousePos = getMousePos(canvas, evt2);
	mouse_down = false;
	drag_value = 9;
	if(mousePos.x > -1 && mousePos.x < 10 && mousePos.y > -1 && mousePos.y < 10){
	update_display(mousePos.x,mousePos.y);
	}
	dragged = false;
});

document.addEventListener('mousedown', function(){ //When mouse is pressed down
mouse_down = true;
});

function mode_change(mode){
	switch(mode){
		case 'Random': //Reloads the page since the program initially runs a random problem
			location.reload();
		break;
		
		case 'Easy': //Generates an easy to solve problem
		solution_shown = false;
		if(guessing){
			guessing = false;
			color_change('button3');
		}
		break;
		
		case 'Solution': //Shows the solution and mistakes
		if(!solution_shown){
			display_answer();
			solution_shown = true;
		}
		if(guessing){
			guessing = false;
			color_change('button3');
		}
		break;
		
		case 'Solver': //Solves the problem as far as possible using the programmed logic
		if(!solution_shown){
		
		}
		if(guessing){
			guessing = false;
			color_change('button3');
		}
		break;
		
		case 'Enter': //Allows user to enter their own problems
		solution_shown = false;
		if(guessing){
			guessing = false;
			color_change('button3');
		}
		break;
		
		case 'Restart': //Restarts current problem
		solution_shown = false;
		display_problem();
		if(guessing){
			guessing = false;
			color_change('button3');
		}
		break;
		
		case 'Guess': //Allows user guessing mode
		if(!solution_shown){
			color_change('button3');
			guessing = true;
		}
		break;
	}
}

</script>

</body>
</html>
